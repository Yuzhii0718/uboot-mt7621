const translations={en:{title:"MediaTek System Recovery Mode",banner:"MediaTek U-Boot System Recovery Mode",upload_new:"Upload new firmware:",upload_button:"Upload",file_confirmation:"File confirmation:",md5:"MD5:",size:"Size:",bytes:"Bytes",proceed_info:"If all information above is correct, click [Proceed].",proceed_button:"Proceed",upgrading:"Upgrading is in progressing, please wait ...",page_status:"This page may be in not responding status for a short time.",upgrade_complete:"Upgrade complete!",rebooting:"Rebooting ...",upgrade_failed:"Upgrade failed!",return:"Return",page_not_found:"Page not found",theme_light:"Light",theme_dark:"Dark",theme_auto:"Auto"},zh:{title:"MediaTek 系统恢复模式",banner:"MediaTek U-Boot 系统恢复模式",upload_new:"上传新固件：",upload_button:"上传",file_confirmation:"文件确认：",md5:"MD5值：",size:"大小：",bytes:"字节",proceed_info:"如果以上信息正确，请点击 [继续]。",proceed_button:"继续",upgrading:"正在升级，请稍候...",page_status:"此页面可能会短时间内无响应。",upgrade_complete:"升级完成！",rebooting:"正在重启...",upgrade_failed:"升级失败！",return:"返回",page_not_found:"页面未找到",theme_light:"浅色",theme_dark:"深色",theme_auto:"自动"}};let currentLang="en",currentTheme="auto";function initApp(){loadPreferences(),setupLanguageSelector(),setupThemeSelector(),applyLanguage(),applyTheme()}function loadPreferences(){const e=localStorage.getItem("preferredLanguage");if(e&&translations[e])currentLang=e;else{const e=navigator.language.split("-")[0];translations[e]&&(currentLang=e)}const t=localStorage.getItem("preferredTheme");t&&(currentTheme=t)}function setupLanguageSelector(){const e=document.getElementById("language-selector");e&&(e.value=currentLang,e.addEventListener("change",function(){currentLang=this.value,localStorage.setItem("preferredLanguage",currentLang),applyLanguage()}))}function setupThemeSelector(){const e=document.getElementById("theme-selector");e&&(e.value=currentTheme,e.addEventListener("change",function(){currentTheme=this.value,localStorage.setItem("preferredTheme",currentTheme),applyTheme()}))}function applyLanguage(){const e=translations[currentLang]||translations.en;document.title=e.title||document.title,document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n");e[n]&&("INPUT"!==t.tagName||"submit"!==t.type&&"button"!==t.type?t.textContent=e[n]:t.value=e[n])})}function applyTheme(){document.documentElement.setAttribute("data-theme",currentTheme),"auto"===currentTheme?document.documentElement.classList.remove("force-light","force-dark"):"light"===currentTheme?(document.documentElement.classList.add("force-light"),document.documentElement.classList.remove("force-dark")):"dark"===currentTheme&&(document.documentElement.classList.add("force-dark"),document.documentElement.classList.remove("force-light"))}window.addEventListener("DOMContentLoaded",initApp);